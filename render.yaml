services:
  - type: web
    name: sbf-florist-frontend
    env: node
    buildCommand: |
      # Clear any existing lock files to avoid conflicts
      rm -f package-lock.json
      rm -f bun.lockb
      
      # Install dependencies with npm (more stable for deployment)
      npm install --legacy-peer-deps
      
      # Build the application
      npm run build:production
    startCommand: npm run preview
    envVars:
      - key: NODE_ENV
        value: production
      - key: NPM_CONFIG_REGISTRY
        value: https://registry.npmjs.org/
    healthCheckPath: /
    autoDeploy: true
    branch: main 